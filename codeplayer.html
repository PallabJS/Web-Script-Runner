<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Code Player</title>

    <script src="jquery.js" type="text/javascript"></script>
    <script src="jquery-ui/jquery-ui.js"></script>
    <link href="jquery-ui/jquery-ui.css" rel="stylesheet">
</head>

<style>
    body
    {
        font-style: sans-serif;
        padding: 0;
        margin: 0px;
        font-size: 20pt;
    }
    #logo
    {
        float: left;
        /* padding-top: 15px; */
        margin-left: 50px;
    }
    #header
    {
        /* border: 1px solid rgb(235, 10, 10); */
        width: 100%;
        /* min-height: 50px; */
        background-color: rgba(107, 174, 219, 0.438);
        /* padding: 5px; */
    }
    #buttoncontainer
    {
        /* border: 2px rgb(4, 0, 255) solid; */
        /* margin: 0 auto; */
        width: 100%;
        height: 50px;
        text-align: center;

    }
    .togglebutton
    {
        float: left;
        /* border: 2px solid rgb(15, 211, 113); */
        border-right: none;
        width: 10%;
        height: 100%;
        text-align: center;
    }
    #html
    {
        margin-left: 50px;
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
    }
    #output
    {
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;
    }
    .active
    {
        border-radius: 5px;
        background-color: rgba(14, 150, 240, 0.678);
    }
    .highlightedbuttoncolor
    {
        border-radius: 5px;
        background-color: white;
    }
    #bodycontainer
    {
        padding-top: 10px;
        padding-left: 30px;
    }
    textarea
    {
        /* margin-left: 10px; */
        width: 48%;
        resize: none;
        font-size: 15pt;
        float: left;
    }
    .panel
    {
        float: left;
    }
    .hidden
    {
        display: none;
    }
    iframe
    {
        width: 48%;
    }
    #runjs
    {
        width: 150px;
        text-align: center;
        border-radius: 10px;
        font-size: 13pt;
        margin-left: 50px;
        color: black;
        background-color: white;
    }
    #runjs:hover
    {
        background-color: rgb(19, 161, 19);
        color: white;
        /* border: 2px solid rgb(15, 211, 113); */
    }
    .putcenter
    {
        /* margin-left: 20px; */
        float: left;
        position: relative;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }
    .runbuttoncenter
    {
        margin-left: 20px;
        position: relative;
        float: left;
        top: 50%;
        transform: translate(0%, -50%); 
    }
</style>

<body>
    <div id="header">

        <div id="buttoncontainer">
            <div style="margin-left: 30px; float: left; position: relative; top: 50%; "><b><div class="putcenter">WEB SCRIPT RUNNER</div></b></div>
            <div class="togglebutton active" id="html"><div class="putcenter">HTML</div></div>
            <div class="togglebutton" id="css"><div class="putcenter">CSS</div></div>
            <div class="togglebutton" id="javascript"><div class="putcenter">JAVASCRIPT</div></div>
            <div class="togglebutton active" id="output"><div class="putcenter">OUTPUT</div></div>
            <button class="runbuttoncenter" id="runjs" onclick="runjavascript()">Run JavaScript</button> 
        </div>
    </div>

    <div id="bodycontainer">
        <textarea id="htmlpanel" class="panel">&ltp&gt Write html script here......&ltp&gt</textarea>
        <textarea id="csspanel" class="panel hidden">p { color: green; font-size: 50pt}</textarea>
        <textarea id="javascriptpanel" class="panel hidden">Write Javascript here......</textarea>

        <iframe id="outputpanel" class="panel "></iframe>
    </div>


 

<script type="text/javascript">
    function runjavascript()
    {
        document.getElementById("outputpanel").contentWindow.eval($("#javascriptpanel").val()); 
    }
    $(".togglebutton").hover(function()
    {
        $(this).addClass("highlightedbuttoncolor");
    },  function()
    {
        $(this).removeClass("highlightedbuttoncolor");
    });
    
    var numberofactivepanels = 2;
    $(".panel").width(($(window).width()/numberofactivepanels) - 25);

    $(".togglebutton").click(function()
    {
        $(this).toggleClass("active");
        $(this).removeClass("highlightedbuttoncolor");
        var panelid = $(this).attr("id") + "panel";
        $("#" + panelid).toggleClass("hidden");
        numberofactivepanels = 4 - $(".hidden").length;
        var wadjust = 0;
        if(numberofactivepanels == 2){wadjust = 25}
        else if(numberofactivepanels == 3){wadjust = 20}
        else{wadjust = 15};
        console.log("active panel: "+ numberofactivepanels);
        $(".panel").width(($(window).width()/numberofactivepanels) - wadjust);
    });

    $(".panel").height($(window).height() - $("#header").height()-30);
    $("iframe").contents().find("html").html("<html><head><style>" + $("#csspanel").val()+ "</style><//head><body>"+ $("#htmlpanel").val() + "<//body><//html>");

    $("textarea").on("change keyup paste", function()
    {
        $("iframe").contents().find("html").html("<html><head><style>" + $("#csspanel").val()+ "</style><//head><body>"+ $("#htmlpanel").val() + "<//body><//html>");   
    });
</script>
    
</body>
</html>